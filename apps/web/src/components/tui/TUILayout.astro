---
import StatusBar from './StatusBar.astro';
import ContentTypeNav from './ContentTypeNav.astro';
import ContentList from './ContentList.astro';
import ContentViewer from './ContentViewer.astro';
import TerminalInstructions from './TerminalInstructions.astro';
import SearchBar from './SearchBar.astro';
import TagFilter from './TagFilter.astro';
import TUIInitializer from './TUIInitializer.astro';

interface Props {
  data: string;
}

const { data } = Astro.props;
---

<div class="h-screen flex flex-col bg-bg-primary text-fg-primary font-mono overflow-hidden">
  <!-- Status Bar -->
  <div id="status-bar-container">
    <StatusBar />
  </div>

  <!-- Main Content Area -->
  <div class="flex-1 flex overflow-hidden">
    <!-- Left: Content Type Navigator -->
    <div id="nav-panel" class="w-64 border-r border-border bg-bg-secondary overflow-y-auto">
      <ContentTypeNav client:load data={data} />
    </div>

    <!-- Middle: Content List -->
    <div id="list-panel" class="flex-1 border-r border-border bg-bg-primary overflow-y-auto">
      <ContentList client:load data={data} />
    </div>

    <!-- Right: Content Viewer -->
    <div id="viewer-panel" class="w-96 bg-bg-secondary overflow-y-auto">
      <ContentViewer client:load data={data} />
    </div>
  </div>

  <!-- Bottom: Terminal Instructions -->
  <div id="instructions-panel" class="h-16 border-t border-border bg-bg-tertiary">
    <TerminalInstructions client:load />
  </div>
</div>

<!-- Search and Tag Filter Overlays -->
<SearchBar client:load />
<TagFilter client:load data={data} />

<!-- Initialize TUI Controller -->
<TUIInitializer client:load data={data} />

<style>
  /* Box-drawing characters for borders */
  #nav-panel,
  #list-panel,
  #viewer-panel {
    position: relative;
  }

  #nav-panel::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 1px;
    height: 100%;
    background: var(--color-border);
  }
</style>
