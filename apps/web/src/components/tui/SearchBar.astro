---

---

<div
  id="search-overlay"
  class="hidden fixed inset-0 bg-bg-primary/95 z-50 flex items-center justify-center"
>
  <div class="w-full max-w-2xl px-8">
    <div class="mb-4 text-fg-secondary">
      <span class="text-accent-cyan">/</span> Search
    </div>
    <input
      type="text"
      id="search-input"
      class="w-full px-4 py-3 bg-bg-secondary border-2 border-accent-blue rounded font-mono text-fg-primary focus:outline-none focus:ring-2 focus:ring-accent-blue"
      placeholder="Type to search..."
      autofocus
    />
    <div class="mt-4 text-sm text-fg-muted">
      Press <kbd class="px-2 py-1 bg-bg-tertiary border border-border rounded">Esc</kbd> to cancel,
      <kbd class="px-2 py-1 bg-bg-tertiary border border-border rounded">Enter</kbd> to confirm
    </div>
  </div>
</div>

<script>
  const searchOverlay = document.getElementById('search-overlay');
  const searchInput = document.getElementById('search-input') as HTMLInputElement;

  function showSearch() {
    if (searchOverlay) {
      searchOverlay.classList.remove('hidden');
      searchInput?.focus();
    }
  }

  function hideSearch() {
    if (searchOverlay) {
      searchOverlay.classList.add('hidden');
      if (searchInput) searchInput.value = '';
    }
  }

  function confirmSearch() {
    const query = searchInput?.value || '';
    window.dispatchEvent(new CustomEvent('search-update', { detail: { query } }));
    hideSearch();
  }

  // Listen for search activation
  window.addEventListener('search-activate', showSearch);

  // Handle input
  searchInput?.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      e.preventDefault();
      // Clear search when canceling
      window.dispatchEvent(new CustomEvent('search-update', { detail: { query: '' } }));
      hideSearch();
    } else if (e.key === 'Enter') {
      e.preventDefault();
      confirmSearch();
    }
  });

  // Real-time search updates
  searchInput?.addEventListener('input', () => {
    const query = searchInput.value;
    window.dispatchEvent(new CustomEvent('search-update', { detail: { query } }));
  });
</script>

<style>
  #search-input {
    font-family: 'Inconsolata', monospace;
  }
</style>
