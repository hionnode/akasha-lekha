---
import Layout from '../layouts/Layout.astro';
import LoadingAnimation from '../components/tui/LoadingAnimation.astro';
---

<Layout title="TUI Interface | works-on-my.cloud">
  <div id="tui-app" class="min-h-screen bg-bg-primary text-fg-primary font-mono">
    <div id="loading-screen">
      <LoadingAnimation />
    </div>
    <div id="content" class="hidden">
      <div class="container mx-auto px-4 py-12 max-w-[1200px]">
        <div class="text-center py-20">
          <h1 class="text-4xl font-bold mb-4">Terminal Interface</h1>
          <p class="text-fg-secondary text-lg mb-8">
            The TUI interface is currently under development.
          </p>
          <a
            href="/"
            class="inline-block px-6 py-3 bg-accent-blue text-bg-primary rounded hover:bg-accent-cyan transition-colors font-semibold"
          >
            Return to Home
          </a>
        </div>
      </div>
    </div>
  </div>
</Layout>

<script>
  // Show loading for 1 second, then show content
  const loadingScreen = document.getElementById('loading-screen');
  const content = document.getElementById('content');

  function showContent() {
    loadingScreen?.classList.add('hidden');
    content?.classList.remove('hidden');
  }

  // Initial load
  setTimeout(showContent, 1000);

  // Show loading on page navigation
  document.addEventListener('DOMContentLoaded', () => {
    // Intercept link clicks to show loading animation
    document.addEventListener('click', (e) => {
      const target = e.target as HTMLElement;
      const link = target.closest('a');

      if (link && link.href && !link.target && !link.hasAttribute('download')) {
        const href = link.getAttribute('href');
        const currentOrigin = window.location.origin;

        // Only intercept internal links
        if (href && (href.startsWith('/') || href.startsWith(currentOrigin))) {
          // Show loading screen
          if (loadingScreen && content) {
            loadingScreen.classList.remove('hidden');
            content.classList.add('hidden');

            // Hide after navigation (browser will handle the navigation)
            setTimeout(() => {
              // This will run after page loads
            }, 100);
          }
        }
      }
    });
  });
</script>

<style>
  #tui-app {
    font-family: 'Inconsolata', monospace;
  }
</style>
