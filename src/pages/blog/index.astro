---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/layout/Header.astro';
import Footer from '../../components/layout/Footer.astro';
import Container from '../../components/layout/Container.astro';
import PostList from '../../components/blog/PostList.astro';
import FilterBar from '../../components/blog/FilterBar.astro';

const allPosts = await getCollection('blog', ({ data }) => !data.draft);
const posts = allPosts.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<Layout title="Blog | works-on-my.cloud" description="Technical articles about cloud infrastructure, DevOps, security, and observability">
  <div class="min-h-screen flex flex-col">
    <Header />
    <main class="flex-1">
      <Container class="py-12">
        <h1 class="mb-8">Blog</h1>
        <FilterBar />
        <PostList posts={posts} />
      </Container>
    </main>
    <Footer />
  </div>
</Layout>

