---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/layout/Header.astro';
import Footer from '../../components/layout/Footer.astro';
import Container from '../../components/layout/Container.astro';
import ScriptCard from '../../components/code/ScriptCard.astro';

const scripts = await getCollection('scripts');
---

<Layout title="Code Library | works-on-my.cloud" description="Bash scripts, Terraform modules, and infrastructure code">
  <div class="min-h-screen flex flex-col">
    <Header />
    <main class="flex-1">
      <Container class="py-12">
        <h1 class="mb-4">Code Library</h1>
        <p class="text-fg-secondary text-lg mb-8">
          Bash scripts, Terraform modules, and infrastructure code
        </p>
        <div class="space-y-6">
          {scripts.map((script) => (
            <ScriptCard
              title={script.data.title}
              description={script.data.description}
              tags={script.data.tags}
              language={script.data.language}
              slug={script.slug}
              externalRepo={script.data.externalRepo}
            />
          ))}
        </div>
      </Container>
    </main>
    <Footer />
  </div>
</Layout>

