---
---

<div class="flex flex-col items-center justify-center min-h-screen bg-bg-primary">
  <div class="text-center mb-8">
    <h2 class="text-2xl font-bold mb-4 text-fg-primary">Select Navigation Mode</h2>
    <p class="text-fg-secondary mb-6">Choose your preferred keyboard navigation style</p>
  </div>

  <div class="flex gap-8">
    <button
      id="vim-mode"
      class="border-2 border-border bg-bg-secondary p-6 rounded hover:border-accent-blue hover:bg-bg-tertiary transition-all cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent-blue"
      data-mode="vim"
    >
      <div class="text-xl font-bold mb-2 text-accent-cyan">Vim Keys</div>
      <div class="text-sm text-fg-secondary mb-3">hjkl navigation</div>
      <div class="text-xs text-fg-muted font-mono">
        h ← | j ↓ | k ↑ | l →
      </div>
    </button>

    <button
      id="arrow-mode"
      class="border-2 border-border bg-bg-secondary p-6 rounded hover:border-accent-blue hover:bg-bg-tertiary transition-all cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent-blue"
      data-mode="arrows"
    >
      <div class="text-xl font-bold mb-2 text-accent-blue">Arrow Keys</div>
      <div class="text-sm text-fg-secondary mb-3">Standard navigation</div>
      <div class="text-xs text-fg-muted font-mono">
        ↑ ↓ ← →
      </div>
    </button>
  </div>

  <div class="mt-8 text-fg-muted text-sm">
    Press <kbd class="px-2 py-1 bg-bg-tertiary border border-border rounded">V</kbd> for Vim or <kbd class="px-2 py-1 bg-bg-tertiary border border-border rounded">A</kbd> for Arrows
  </div>
</div>

<script>
  let selectedMode: 'vim' | 'arrows' | null = null;

  const vimButton = document.getElementById('vim-mode');
  const arrowButton = document.getElementById('arrow-mode');

  function selectMode(mode: 'vim' | 'arrows') {
    selectedMode = mode;
    
    // Update UI
    if (mode === 'vim') {
      vimButton?.classList.add('border-accent-cyan', 'bg-bg-tertiary');
      vimButton?.classList.remove('border-border');
      arrowButton?.classList.remove('border-accent-blue', 'bg-bg-tertiary');
      arrowButton?.classList.add('border-border');
    } else {
      arrowButton?.classList.add('border-accent-blue', 'bg-bg-tertiary');
      arrowButton?.classList.remove('border-border');
      vimButton?.classList.remove('border-accent-cyan', 'bg-bg-tertiary');
      vimButton?.classList.add('border-border');
    }

    // Store preference
    localStorage.setItem('tui-navigation-mode', mode);

    // Dispatch event and proceed
    setTimeout(() => {
      window.dispatchEvent(new CustomEvent('keybinding-selected', { detail: { mode } }));
    }, 500);
  }

  vimButton?.addEventListener('click', () => selectMode('vim'));
  arrowButton?.addEventListener('click', () => selectMode('arrows'));

  // Keyboard shortcuts
  document.addEventListener('keydown', (e) => {
    if (e.key.toLowerCase() === 'v' && !selectedMode) {
      e.preventDefault();
      selectMode('vim');
    } else if (e.key.toLowerCase() === 'a' && !selectedMode) {
      e.preventDefault();
      selectMode('arrows');
    }
  });

  // Auto-select after 2 seconds if no selection
  setTimeout(() => {
    if (!selectedMode) {
      // Check for saved preference
      const saved = localStorage.getItem('tui-navigation-mode') as 'vim' | 'arrows' | null;
      if (saved && (saved === 'vim' || saved === 'arrows')) {
        selectMode(saved);
      } else {
        // Default to arrows
        selectMode('arrows');
      }
    }
  }, 2000);
</script>

